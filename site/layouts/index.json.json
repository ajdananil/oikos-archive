{{- $pages := where .Site.Pages "Section" "species" -}}
[
{{- range $index, $page := $pages -}}
  {{- if $index }},{{ end -}}
  {
    {{- with $page.Params.scientificName -}}
    "scientificName": {{ $page.Params.scientificName | jsonify }},
    {{- end -}}
    {{- with $page.Params.languages -}}
    "commonNames": {
      {{- $languages := . -}}
      {{- $lenLanguages := len $languages -}}
      {{- $counter := 0 -}}
      {{- range $lang, $names := $languages -}}
        {{- $counter = add $counter 1 -}}
        {{ $lang | jsonify }}: [{{ range $i, $name := $names }}{{ if $i }}, {{ end }}{{ $name | jsonify }}{{ end }}]{{ if lt $counter $lenLanguages }},{{ end }}
      {{- end }}
    {{- end -}}
    }
  }
{{- end }}
]


