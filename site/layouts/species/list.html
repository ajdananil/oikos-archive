{{- define "main" -}}

<div class="mw9 center mt2 mb5 min-vh-100">
  <div class="flex flex-wrap mhn1 pa3 justify-center">
    <!-- Image container -->
    <div id="image-container" class="w-100 flex inline-flex justify-center pa3">
      {{- .Render "hasRep" -}}
      {{- $hasRepresentation := .Scratch.Get "hasRepresentation" -}}
      
      {{- if $hasRepresentation -}}
        <div id="gallery" class="flex items-center">
          {{- $representations := .Site.GetPage "section" "representations" -}}
          {{- $uuid := .Params.uuid -}}
          {{- range $representations.Pages -}}
            {{- if eq $uuid .Params.speciesid -}}
              <div class="gallery-item mr4 ml4">
                <img class="h-auto mht6" src="representations/{{- .Params.speciesid -}}{{- .Params.image -}}" alt="">
                <div class="flex flex-column f6">
                  <div><i>{{ .Params.title | default "Untitled" }}</i> ({{ .Params.year | default "unknown year" }})</div>
                  <div>{{ .Params.author | default "Unknown Artist" }}</div>
                  <div>{{ .Params.contact | default "-" }}</div>
                </div>
              </div>
            {{- end -}}
          {{- end -}}
      </div>
      
        {{- else -}}
          {{- .Render "englishName" -}}
          {{- $englishName := .Scratch.Get "englishName" | title -}} 
          {{- $otherName := .Scratch.Get "otherName" | title -}}
          {{- .Render "pathCalc" -}}
          <!-- SVG and Title -->
          <div class="svg-container tc w-100 h4 mb3 mt3" style="position: relative;">
            <div class="bgstroke w-100 h4" id="svgContainer">
              <svg width="350px" height="150px" xmlns="http://www.w3.org/2000/svg" style="filter:blur(20px); overflow: visible;">
                <path  fill="{{- .Page.Params.color -}}" stroke="{{- .Page.Params.color -}}" stroke-width="100" class="morphing-path" d="{{- .Scratch.Get "svgPath" -}}"></path>
              </svg>   
            </div>
            <h2 class="absolute f2 title comp-color top-50 left-50" style="transform: translate(-50%, -50%); color: {{- .Params.color -}};">
              {{- if $englishName -}} {{- $englishName -}}{{- else -}}{{- $otherName -}}{{- end -}}
            </h2>   
          </div>
          


        {{- end }}
      
    </div>
    <!-- Additional Info -->
    <div id="content-container" class="w-100 flex flex-column items-center justify-center pa3"> 
      <div class="info-container pa3">
        <div>
          <h2 class="f4">Info</h2>
          <ul>
            <li class="f6"><strong>File Name: </strong>{{ if .Params.fileName -}}{{ .Params.fileName -}}{{- else }}?{{- end -}}</li>
            <li class="f6"><strong>Species Category: </strong>{{ .Params.category }}</li>
          </ul>
        </div>
        <div class="mt3">
          <h2 class="f4">Names</h2>
          <ul class="f6 list pl0">
            {{- range .Params.languages -}}
              {{- $currentLanguage := .language }} 
              {{- with .names -}} 
                <li>
                  <strong>{{ $currentLanguage }}: </strong> 
                  {{- range . -}} 
                    <span>{{ . | title }}</span>
                    {{- if not (eq (index . (sub (len .) 1)) .) }}{{ end }} 
                  {{- end -}}
                </li>
              {{- end -}}
            {{- end -}}
          </ul>
        </div>
        <div class="mt3 f6">
          {{- .Render "englishName" -}}
          {{- $englishName := .Scratch.Get "englishName" | title -}} 
          {{- $otherName := .Scratch.Get "otherName" | title -}}
          <h2 class="f4">Collective knowledge and stories about The {{ if $englishName -}} {{- $englishName -}}{{- else -}}{{- $otherName -}}{{- end -}}</h2>
          {{- if .Content -}}
            <p>{{ .Content }}</p>
          {{- else -}}
            <p>No stories available.</p>
          {{- end -}}
        </div>
      </div>
    </div>
  </div>
</div>



{{- end -}}


